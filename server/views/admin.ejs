<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> 
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> 
    <link rel="stylesheet" type="text/css" href="/css/style.css" >

</head>
<body>
    <%- include('includes/header') %>

    <div class="sidebar">
        <a href="#dashboard">Dashboard</a>
        <a href="#listings">Apartments Management</a>
        <a href="#users">Users Management</a>
    </div>

    <div class="main-content">
        <section id="dashboard">
            <h2>Dashboard</h2>
        </section>

        <section id="listings">
            <h2>Apartments Management</h2>
            
            <table class="listings-table">
                <thead>
                    <tr>
                        <th>Listing Name</th>
                        <th>Location</th>
                        <th>Price per Night</th>
                        <th>Max Guests</th>
                    </tr>
                </thead>
                <tbody id="listingsTableBody">
                    <% for (let apartment of apartmentList) { %>
                        <tr>
                            <td><%=apartment.name%></td>
                            <td> <%=apartment.location.city%> ,<%=apartment.location.country%></td>
                            <td><%=apartment.price%></td>
                            <td><%=apartment.maxGuests%></td>
                        </tr>
                        <% } %>
                    </tbody>
                </table>
                <br>
                <button class="add-listing"><i class="fas fa-plus-circle"></i> Add New Listing</button>
        </section>
        <br>
        <section id="users">
            <h2>Users Management</h2>
            <table class="listings-table">
                <thead>
                    <tr>
                        <th>username</th>
                        <th>email</th>
                        <th>full name</th>
                        <th>is host</th>
                        <th>is admin</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="listingsTableBody">
                    <% for (let user of usersList) { %>
                        <tr>
                            <td><%=user.username%></td>
                            <td> <%=user.email%></td>
                            <td><%=user.firstName%> <%=user.lastName%></td>
                            <td><%=user.isHost%></td>
                            <td><%=user.isAdmin%></td>
                            <td><form method="POST" action="/api/users/delete/<%=user.id%>" >
                                <button type="submit">delete</button>
                            </form></td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </section>
        </div>
        <%- include('includes/footer') %>
    </body>
